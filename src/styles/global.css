@layer reset, tokens, base, components, utilities;

@font-face {
	font-family: "Pier Sans";
	font-display: fallback;
	font-style: normal;
	font-weight: bold;
	src: url("/fonts/PierSans-Bold.woff2") format("woff2");
}

@layer reset {
	/* Use a more-intuitive box-sizing model */
	*,
	*::before,
	*::after {
		box-sizing: border-box;
	}

	/* Remove default margin in favour of better control in authored CSS */
	* {
		margin: 0;
	}

	html {
		scroll-behavior: smooth;
	}

	body {
		/* Add accessible line-height */
		line-height: 1.5;
		/* Improve text rendering */
		-webkit-font-smoothing: antialiased;
		/* Set full height */
		min-height: 100vh;
	}

	/* Improve media defaults */
	img,
	picture,
	video,
	canvas,
	svg {
		display: block;
		max-width: 100%;
	}

	/* nherit fonts for form controls */
	input,
	button,
	textarea,
	select {
		font: inherit;
	}

	/* Avoid text overflows */
	p,
	h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		overflow-wrap: break-word;
	}

	/* Improve line wrapping */
	p {
		text-wrap: pretty;
	}

	/* Balance text wrapping on headings */
	h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		text-wrap: balance;
	}

	/* A elements that don't have a class get default styles */
	a:not([class]) {
		text-decoration-skip-ink: auto;
		color: currentColor;
	}
}

@layer tokens {
	:root {
		/* This has to be set to switch between light or dark */
		color-scheme: light dark;

		/* Rose pine colors */
		--color-moon-base: oklch(26.04% 0.039 287.73);
		--color-moon-surface: oklch(28.75% 0.0435 289.09);
		--color-moon-overlay: oklch(34.63% 0.0502 289.83);
		--color-moon-muted: oklch(53.83% 0.0435 291.41);
		--color-moon-subtle: oklch(65.39% 0.0444 291.23);
		--color-moon-text: oklch(90.88% 0.0299 289.97);
		--color-moon-love: oklch(69.77% 0.1565 4.22);
		--color-moon-gold: oklch(84.29% 0.11 74.6);
		--color-moon-rose: oklch(76.51% 0.0967 21.92);
		--color-moon-pine: oklch(61.38% 0.0926 228);
		--color-moon-foam: oklch(82.19% 0.0543 209.56);
		--color-moon-iris: oklch(77.6% 0.0945 304.99);
		--color-moon-highlight-low: oklch(28.94% 0.0398 287.8);
		--color-moon-highlight-med: oklch(38.87% 0.0421 289.79);
		--color-moon-highlight-high: oklch(45.35% 0.0454 291.02);

		--color-dawn-base: oklch(96.99% 0.0113 71.9);
		--color-dawn-surface: oklch(98.7% 0.0107 76.6);
		--color-dawn-overlay: oklch(93.89% 0.0145 64.34);
		--color-dawn-muted: oklch(67.34% 0.0268 298.37);
		--color-dawn-subtle: oklch(57.68% 0.0458 291);
		--color-dawn-text: oklch(45.97% 0.0629 289.56);
		--color-dawn-love: oklch(59.89% 0.1071 2.66);
		--color-dawn-gold: oklch(75.55% 0.1459 69.74);
		--color-dawn-rose: oklch(69.57% 0.1058 23.03);
		--color-dawn-pine: oklch(49.09% 0.077 228);
		--color-dawn-foam: oklch(62.89% 0.0661 210.12);
		--color-dawn-iris: oklch(61.71% 0.0738 305.7);
		--color-dawn-highlight-low: oklch(95.02% 0.0101 58.21);
		--color-dawn-highlight-med: oklch(89.2% 0.0057 31.06);
		--color-dawn-highlight-high: oklch(84.31% 0.006 334);

		--color-base: light-dark(var(--color-dawn-base), var(--color-moon-base));
		--color-surface: light-dark(var(--color-dawn-surface), var(--color-moon-surface));
		--color-overlay: light-dark(var(--color-dawn-overlay), var(--color-moon-overlay));
		--color-muted: light-dark(var(--color-dawn-muted), var(--color-moon-muted));
		--color-subtle: light-dark(var(--color-dawn-subtle), var(--color-moon-subtle));
		--color-text: light-dark(var(--color-dawn-text), var(--color-moon-text));
		--color-love: light-dark(var(--color-dawn-love), var(--color-moon-love));
		--color-gold: light-dark(var(--color-dawn-gold), var(--color-moon-gold));
		--color-rose: light-dark(var(--color-dawn-rose), var(--color-moon-rose));
		--color-pine: light-dark(var(--color-dawn-pine), var(--color-moon-pine));
		--color-foam: light-dark(var(--color-dawn-foam), var(--color-moon-foam));
		--color-iris: light-dark(var(--color-dawn-iris), var(--color-moon-iris));
		--color-highlight-low: light-dark(
			var(--color-dawn-highlight-low),
			var(--color-moon-highlight-low)
		);
		--color-highlight-med: light-dark(
			var(--color-dawn-highlight-med),
			var(--color-moon-highlight-med)
		);
		--color-highlight-high: light-dark(
			var(--color-dawn-highlight-high),
			var(--color-moon-highlight-high)
		);

		/* Semantic colors */
		--background-primary: var(--color-base);
		--text-primary: var(--color-text);

		/* Code colors */
		--astro-code-foreground: var(--color-text);
		--astro-code-background: var(--color-surface);
		--astro-code-token-constant: var(--color-gold);
		--astro-code-token-string: var(--color-gold);
		--astro-code-token-comment: var(--color-subtle);
		--astro-code-token-keyword: var(--color-foam);
		--astro-code-token-parameter: var(--color-iris);
		--astro-code-token-function: var(--color-rose);
		--astro-code-token-string-expression: var(--color-pine);
		--astro-code-token-punctuation: var(--color-muted);
		--astro-code-token-link: var(--color-iris);
		--astro-code-token-inserted: var(--color-foam);
		--astro-code-token-deleted: var(--color-love);
		--astro-code-token-changed: var(--color-rose);

		/* Focus ring */
		--focus-ring: color-mix(in oklch, var(--color-foam), transparent 20%);
		--selection: color-mix(in oklch, var(--color-muted), transparent 20%);

		/* Fonts */
		--font-sans: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
			Segoe UI Symbol, "Noto Color Emoji";
		--font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono,
			Courier New, monospace;
		--font-display: "Pier Sans", var(--font-sans);
	}
}

@layer base {
	/* Set light color scheme */
	[data-theme="light"] {
		color-scheme: light;
	}

	/* Set dark color scheme */
	[data-theme="dark"] {
		color-scheme: dark;
	}

	::selection {
		background: var(--selection);
	}

	html {
		scroll-behavior: smooth;
	}

	body {
		background-color: var(--background-primary);
		color: var(--text-primary);
		font-family: var(--font-sans);
		font-weight: 450;
	}

	/* Setup the focus ring for interactive elements */
	:where(a, button, input, textarea) {
		--outline-size: 3px;
		--outline-offset: 3px;
		--outline-style: solid;
		--outline-color: var(--focus-ring);

		&:focus-visible,
		&:active {
			outline-color: var(--focus-ring);
		}

		&:where(:not(:active)):focus-visible {
			outline: var(--outline-size) var(--outline-style) var(--outline-color);
			outline-offset: var(--outline-offset, var(--outline-size));
		}

		@media (prefers-reduced-motion: no-preference) {
			transition: outline-offset 150ms ease;
		}
	}
}
